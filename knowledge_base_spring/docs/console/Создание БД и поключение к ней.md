# üóÑÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL

> **–¶–µ–ª—å**: –ù–∞—É—á–∏—Ç—å—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å PostgreSQL, —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –Ω–∏–º

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö?](#-—á—Ç–æ-—Ç–∞–∫–æ–µ-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
- [üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ PostgreSQL](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-PostgreSQL)
- [üíª –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-postgresql)
- [‚öôÔ∏è –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#-–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [üóÉÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#-—Å–æ–∑–¥–∞–Ω–∏–µ-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î](#-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–∫-–±–¥)
- [üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–∏–º–µ—Ä—ã)
- [‚ùå –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏](#-—Ç–∏–ø–∏—á–Ω—ã–µ-–æ—à–∏–±–∫–∏)
- [üß™ –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è](#-–ø—Ä–æ–≤–µ—Ä—å-—Å–≤–æ–∏-–∑–Ω–∞–Ω–∏—è)
- [üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã](#-–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ-—Ä–µ—Å—É—Ä—Å—ã)
- [üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#-–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

---

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö?

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π.

```mermaid
graph TD
    A[–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ] --> B[–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö]
    B --> C[–¢–∞–±–ª–∏—Ü—ã]
    C --> D[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏]
    C --> E[–¢–æ–≤–∞—Ä—ã]
    C --> F[–ó–∞–∫–∞–∑—ã]
    D --> G[ID, –ò–º—è, Email]
    E --> H[ID, –ù–∞–∑–≤–∞–Ω–∏–µ, –¶–µ–Ω–∞]
    F --> I[ID, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –¢–æ–≤–∞—Ä]
```

### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫** - –Ω–∞—Ö–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –∑–∞ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
- ‚úÖ **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –∏ –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ–º —Å –º–∏–ª–ª–∏–æ–Ω–∞–º–∏ –∑–∞–ø–∏—Å–µ–π

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ PostgreSQL

```mermaid
graph TB
    subgraph "–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
        A[–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
        B[–ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
        C[–ö–æ–Ω—Å–æ–ª—å psql]
    end
    
    subgraph "PostgreSQL Server"
        D[Postmaster –ø—Ä–æ—Ü–µ—Å—Å]
        E[Backend –ø—Ä–æ—Ü–µ—Å—Å—ã]
        F[Shared Buffer]
        G[WAL]
    end
    
    subgraph "–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞"
        H[Data Directory]
        I[Tablespaces]
        J[Log files]
    end
    
    A --> D
    B --> D
    C --> D
    D --> E
    E --> F
    E --> G
    F --> H
    G --> J
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
- **Postmaster** - –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **Backend –ø—Ä–æ—Ü–µ—Å—Å—ã** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã –∫–ª–∏–µ–Ω—Ç–æ–≤
- **Shared Buffer** - –∫—ç—à –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **WAL** - –∂—É—Ä–Ω–∞–ª —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

---

## üíª –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

### macOS (—á–µ—Ä–µ–∑ Homebrew)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
brew install postgresql@14

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
brew services start postgresql@14

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
brew services list | grep postgresql
```

### Windows
```bash
# –°–∫–∞—á–∞—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
# https://www.postgresql.org/download/windows/

# –ò–ª–∏ —á–µ—Ä–µ–∑ Chocolatey
choco install postgresql14

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–ª—É–∂–±—ã Windows
net start postgresql-x64-14
```

### Linux (Ubuntu/Debian)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo apt update
sudo apt install postgresql postgresql-contrib

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Å–∏—é
psql --version

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# psql (PostgreSQL) 14.10
```

---

## ‚öôÔ∏è –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```mermaid
flowchart LR
    A[–£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL] --> B[–°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    B --> C[–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞]
    C --> D[–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö]
    D --> E[–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ]
```

#### macOS/Linux:
```bash
# –°–æ–∑–¥–∞–µ–º —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
createuser -s myadmin

# –ò–ª–∏ —á–µ—Ä–µ–∑ psql
sudo -u postgres createuser -s myadmin
```

#### Windows:
```bash
# –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
createuser -s myadmin
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ PostgreSQL
psql -U myadmin -d postgres

# –í–Ω—É—Ç—Ä–∏ psql —Å–æ–∑–¥–∞–µ–º –±–∞–∑—É
CREATE DATABASE myadmin;

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–∏—Å–æ–∫ –±–∞–∑
\l

# –í—ã—Ö–æ–¥–∏–º
\q
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–§–∞–π–ª `pg_hba.conf` (–æ–±—ã—á–Ω–æ –≤ `/etc/postgresql/14/main/` –∏–ª–∏ `/usr/local/var/postgresql/`):

```conf
# –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
local   all             all                                     trust
# IPv4 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
host    all             all             127.0.0.1/32            md5
# IPv6 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è  
host    all             all             ::1/128                 md5
```

---

## üóÉÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ë–î

```mermaid
graph TD
    A[–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL] --> B[–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö]
    B --> C[–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π]
    C --> D[–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤]
    D --> E[–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü]
    E --> F[–í—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö]
    F --> G[–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#fce4ec
    style F fill:#f1f8e9
    style G fill:#e0f2f1
```

### –ü–æ—à–∞–≥–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ

#### 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –±–∞–∑–µ postgres
psql -U myadmin -d postgres

# –ò–ª–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –±–∞–∑–µ
psql -U myadmin -d mydatabase
```

#### 2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
-- –°–æ–∑–¥–∞–µ–º –±–∞–∑—É –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞
CREATE DATABASE shop_db;

-- –°–æ–∑–¥–∞–µ–º –±–∞–∑—É –¥–ª—è –±–ª–æ–≥–∞
CREATE DATABASE blog_db;

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–∞–∑
\l
```

#### 3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–æ–ª–µ–π
```sql
-- –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CREATE USER shop_user WITH PASSWORD 'secure_password123';

-- –°–æ–∑–¥–∞–µ–º —Ä–æ–ª—å —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
CREATE ROLE readonly_role;

-- –î–∞–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ
GRANT CONNECT ON DATABASE shop_db TO readonly_role;
GRANT USAGE ON SCHEMA public TO readonly_role;
GRANT SELECT ON ALL TABLES IN SCHEMA public TO readonly_role;
```

#### 4. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
```sql
-- –î–∞–µ–º –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤–ª–∞–¥–µ–ª—å—Ü—É
GRANT ALL PRIVILEGES ON DATABASE shop_db TO shop_user;

-- –î–µ–ª–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –±–∞–∑—ã
ALTER DATABASE shop_db OWNER TO shop_user;
```

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

### –°–ø–æ—Å–æ–±—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```mermaid
graph LR
    A[–ö–ª–∏–µ–Ω—Ç] --> B[TCP/IP]
    A --> C[Unix Socket]
    A --> D[SSL]
    
    B --> E[PostgreSQL Server]
    C --> E
    D --> E
    
    style A fill:#e3f2fd
    style E fill:#f3e5f5
```

### 1. –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É (psql)
```bash
# –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql -U username -d database_name

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º —Ö–æ—Å—Ç–∞ –∏ –ø–æ—Ä—Ç–∞
psql -h localhost -p 5432 -U username -d database_name

# –° –ø–∞—Ä–æ–ª–µ–º (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
psql -U username -d database_name -W

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
psql -h remote-server.com -p 5432 -U username -d database_name
```

### 2. –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (Connection String)
```
postgresql://username:password@host:port/database
```

–ü—Ä–∏–º–µ—Ä—ã:
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql "postgresql://myadmin@localhost:5432/shop_db"

# –° –ø–∞—Ä–æ–ª–µ–º
psql "postgresql://shop_user:password123@localhost:5432/shop_db"

# SSL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql "postgresql://user:pass@host:5432/db?sslmode=require"
```

### 3. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã psql

```sql
-- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
\l

-- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
\dt

-- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
\d table_name

-- –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
\du

-- –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –±–∞–∑—É
SELECT current_database();

-- –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT current_user;

-- –í—ã—Ö–æ–¥ –∏–∑ psql
\q
```

---

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞

```mermaid
erDiagram
    USERS ||--o{ ORDERS : places
    USERS {
        int id PK
        string email
        string name
        string password_hash
        timestamp created_at
    }
    ORDERS ||--o{ ORDER_ITEMS : contains
    ORDERS {
        int id PK
        int user_id FK
        decimal total_amount
        string status
        timestamp order_date
    }
    PRODUCTS ||--o{ ORDER_ITEMS : included_in
    PRODUCTS {
        int id PK
        string name
        string description
        decimal price
        int stock_quantity
    }
    ORDER_ITEMS {
        int id PK
        int order_id FK
        int product_id FK
        int quantity
        decimal unit_price
    }
```

```sql
-- –°–æ–∑–¥–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE shop_db;

-- –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –Ω–µ–π
\c shop_db

-- –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(100) NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    stock_quantity INTEGER DEFAULT 0
);

CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    user_id INTEGER REFERENCES users(id),
    total_amount DECIMAL(10,2) NOT NULL,
    status VARCHAR(50) DEFAULT 'pending',
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE order_items (
    id SERIAL PRIMARY KEY,
    order_id INTEGER REFERENCES orders(id),
    product_id INTEGER REFERENCES products(id),
    quantity INTEGER NOT NULL,
    unit_price DECIMAL(10,2) NOT NULL
);

-- –í—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
INSERT INTO users (email, name, password_hash) VALUES
('john@example.com', 'John Doe', 'hash123'),
('jane@example.com', 'Jane Smith', 'hash456');

INSERT INTO products (name, description, price, stock_quantity) VALUES
('Laptop', 'High-performance laptop', 999.99, 10),
('Mouse', 'Wireless mouse', 29.99, 50);

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ
SELECT * FROM users;
SELECT * FROM products;
```

### –ü—Ä–∏–º–µ—Ä 2: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–ª—è –±–ª–æ–≥–∞

```sql
-- –°–æ–∑–¥–∞–µ–º –±–∞–∑—É –¥–ª—è –±–ª–æ–≥–∞
CREATE DATABASE blog_db;
\c blog_db

-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
CREATE TABLE authors (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    bio TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ—Å—Ç–æ–≤
CREATE TABLE posts (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    author_id INTEGER REFERENCES authors(id),
    published_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_published BOOLEAN DEFAULT FALSE
);

-- –¢–∞–±–ª–∏—Ü–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
CREATE TABLE comments (
    id SERIAL PRIMARY KEY,
    post_id INTEGER REFERENCES posts(id),
    author_name VARCHAR(100) NOT NULL,
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- –¢–∞–±–ª–∏—Ü–∞ —Ç–µ–≥–æ–≤
CREATE TABLE tags (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) UNIQUE NOT NULL
);

-- –°–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å—Ç–æ–≤ –∏ —Ç–µ–≥–æ–≤
CREATE TABLE post_tags (
    post_id INTEGER REFERENCES posts(id),
    tag_id INTEGER REFERENCES tags(id),
    PRIMARY KEY (post_id, tag_id)
);
```

---

## ‚ùå –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

### 1. –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```mermaid
graph TD
    A[–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è] --> B{–¢–∏–ø –æ—à–∏–±–∫–∏}
    B -->|FATAL: database does not exist| C[–ë–∞–∑–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞]
    B -->|FATAL: role does not exist| D[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–æ–∑–¥–∞–Ω]
    B -->|FATAL: password authentication failed| E[–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å]
    B -->|FATAL: no pg_hba.conf entry| F[–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞]
    
    C --> G[CREATE DATABASE dbname]
    D --> H[CREATE USER username]
    E --> I[–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å]
    F --> J[–ù–∞—Å—Ç—Ä–æ–∏—Ç—å pg_hba.conf]
    
    style A fill:#ffebee
    style B fill:#fff3e0
    style C fill:#ffebee
    style D fill:#ffebee
    style E fill:#ffebee
    style F fill:#ffebee
```

#### –†–µ—à–µ–Ω–∏—è:

**–û—à–∏–±–∫–∞**: `FATAL: database "mydb" does not exist`
```bash
# –†–µ—à–µ–Ω–∏–µ: —Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É
psql -U postgres -c "CREATE DATABASE mydb;"
```

**–û—à–∏–±–∫–∞**: `FATAL: role "myuser" does not exist`
```bash
# –†–µ—à–µ–Ω–∏–µ: —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
createuser -U postgres myuser
```

**–û—à–∏–±–∫–∞**: `FATAL: password authentication failed`
```bash
# –†–µ—à–µ–Ω–∏–µ: —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å
psql -U postgres -c "ALTER USER myuser PASSWORD 'newpassword';"
```

### 2. –û—à–∏–±–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

**–û—à–∏–±–∫–∞**: `permission denied for database`
```sql
-- –†–µ—à–µ–Ω–∏–µ: –¥–∞—Ç—å –ø—Ä–∞–≤–∞
GRANT CONNECT ON DATABASE mydb TO myuser;
GRANT USAGE ON SCHEMA public TO myuser;
GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO myuser;
```

**–û—à–∏–±–∫–∞**: `permission denied for table`
```sql
-- –†–µ—à–µ–Ω–∏–µ: –¥–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
GRANT ALL PRIVILEGES ON TABLE mytable TO myuser;
```

### 3. –û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–û—à–∏–±–∫–∞**: `could not connect to server: Connection refused`
```bash
# –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
# macOS
brew services list | grep postgresql

# Linux
sudo systemctl status postgresql

# Windows
sc query postgresql-x64-14
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è
1. –ß—Ç–æ —Ç–∞–∫–æ–µ PostgreSQL?
   - [ ] –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
   - [x] –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
   - [ ] –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
   - [ ] –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è

2. –ö–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ PostgreSQL?
   - [ ] Backend process
   - [x] Postmaster
   - [ ] WAL
   - [ ] Shared Buffer

3. –ö–∞–∫–æ–π –∫–æ–º–∞–Ω–¥–æ–π —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö?
   - [ ] `CREATE TABLE database_name`
   - [x] `CREATE DATABASE database_name`
   - [ ] `NEW DATABASE database_name`
   - [ ] `BUILD DATABASE database_name`

### –¢–µ—Å—Ç 2: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
1. –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö `shop_db` –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º `admin`?
   ```bash
   psql -U admin -d shop_db
   ```

2. –ö–∞–∫ –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤ psql?
   ```sql
   \l
   ```

3. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?
   ```bash
   createuser -s username
   ```

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏

#### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–π –ë–î
–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏:
- `books` (id, title, author, year, isbn)
- `readers` (id, name, email, phone)
- `borrowings` (id, book_id, reader_id, borrow_date, return_date)

#### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `librarian` —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `guest` —Ç–æ–ª—å–∫–æ —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

#### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ 3: –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
pg_dump -U username -d database_name > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
psql -U username -d database_name < backup.sql
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [psql Reference](https://www.postgresql.org/docs/current/app-psql.html)

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
SELECT version();

# –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
SELECT pg_size_pretty(pg_database_size('database_name'));

# –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
SELECT * FROM pg_stat_activity;

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º
SELECT schemaname, tablename, attname, n_distinct, correlation 
FROM pg_stats 
WHERE tablename = 'your_table';
```

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
- **pgAdmin** - –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **DBeaver** - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –ë–î
- **DataGrip** - IDE –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **psql** - –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è)

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤—ã —É–º–µ–µ—Ç–µ:
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å PostgreSQL –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–°
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ü–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –ë–î —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏
- ‚úÖ –†–µ—à–∞—Ç—å —Ç–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**: –ò–∑—É—á–∏—Ç–µ SQL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∏ —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏!

---

*üí° **–°–æ–≤–µ—Ç**: –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ—Å—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –≤—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ø–µ—Ä–µ–¥ –≤–∞–∂–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏.*